<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Simon Raymond" />

<meta name="date" content="2025-01-31" />

<title>A Nonparametric Implementation of the Heckman Correction in 4th Downs in the NFL</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore"><strong>A Nonparametric Implementation of
the Heckman Correction in 4th Downs in the NFL</strong></h1>
<h4 class="author"><strong>Simon Raymond</strong></h4>
<h4 class="date"><strong>January 31, 2025</strong></h4>

</div>


<div id="setup" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Setup</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>outcome_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;predict_outcome.csv.gz&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;predict_select.csv.gz&quot;</span>)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:data.table&#39;:
## 
##     between, first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre><code>## 
## Attaching package: &#39;gridExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>select_data[, attempt <span class="sc">:=</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(attempt))]</span></code></pre></div>
</div>
<div id="selection-step" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Selection Step</h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span></code></pre></div>
<pre><code>## randomForest 4.7-1.1</code></pre>
<pre><code>## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>## 
## Attaching package: &#39;randomForest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:gridExtra&#39;:
## 
##     combine</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     margin</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Convert attempt to factor</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>select_data<span class="sc">$</span>attempt <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(select_data<span class="sc">$</span>attempt)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># Fit random forest model</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  attempt <span class="sc">~</span> . <span class="sc">-</span> my_id,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>  <span class="at">data =</span> select_data,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>  <span class="at">ntree =</span> <span class="dv">500</span>,</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>  <span class="at">nodesize =</span> <span class="dv">1</span>,</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>  <span class="at">importance =</span> <span class="cn">TRUE</span>,</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="at">probability =</span> <span class="cn">TRUE</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="co"># Calculate OOB AUC</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="fu">library</span>(pROC)</span></code></pre></div>
<pre><code>## Type &#39;citation(&quot;pROC&quot;)&#39; for a citation.</code></pre>
<pre><code>## 
## Attaching package: &#39;pROC&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     cov, smooth, var</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>oob_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, <span class="at">type =</span> <span class="st">&quot;prob&quot;</span>)[,<span class="dv">2</span>]</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>oob_auc <span class="ot">&lt;-</span> <span class="fu">auc</span>(<span class="fu">roc</span>(select_data<span class="sc">$</span>attempt, oob_pred))</span></code></pre></div>
<pre><code>## Setting levels: control = 0, case = 1</code></pre>
<pre><code>## Setting direction: controls &lt; cases</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;OOB AUC:&quot;</span>, <span class="fu">round</span>(oob_auc, <span class="dv">3</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;OOB AUC: 0.858&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Get probability predictions for GIMR</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, <span class="at">newdata =</span> select_data, <span class="at">type =</span> <span class="st">&quot;prob&quot;</span>)[,<span class="dv">2</span>]</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co"># Calculate residuals for RF predictions</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(select_data<span class="sc">$</span>attempt))</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>residuals <span class="ot">&lt;-</span> y <span class="sc">-</span> z</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Histogram of residuals</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">hist</span>(residuals, <span class="at">main=</span><span class="st">&quot;Distribution of RF Model Residuals&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Residual&quot;</span>, <span class="at">breaks=</span><span class="dv">50</span>)</span></code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># plot out the z values\</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(z), </span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Density of Z Predictions&quot;</span>,</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Predicted Probability of Attempt&quot;</span>,</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Density&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># Calculate GIMR (lambda) This is Generalized inverse mills ratio</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>GIMR <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(<span class="fu">qnorm</span>(z)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(z)))</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="co"># Add GIMR to the data</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>select_data[, GIMR <span class="sc">:=</span> GIMR]</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="co"># Create a data.table with just my_id and GIMR from select_data</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>GIMR_dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">my_id =</span> select_data<span class="sc">$</span>my_id, <span class="at">GIMR =</span> GIMR)</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="co"># Add GIMR to outcome_data by matching on my_id</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>outcome_data[GIMR_dt, GIMR <span class="sc">:=</span> i.GIMR, on <span class="ot">=</span> <span class="st">&quot;my_id&quot;</span>]</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>importance_df <span class="ot">&lt;-</span> <span class="fu">importance</span>(rf_model) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;Variable&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(MeanDecreaseAccuracy))</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a><span class="fu">print</span>(importance_df)</span></code></pre></div>
<pre><code>##                      Variable            0           1 MeanDecreaseAccuracy
## 1                     ydstogo 117.69279349 140.2040070          145.7707032
## 2                yardline_100  47.06364301  95.0648915           88.9456690
## 3                    vegas_wp  41.21585287  40.1059044           57.6436979
## 4                time_in_half  36.44500879  51.6961159           57.1258035
## 5               is_first_half  19.11823203  46.0006486           45.3827730
## 6                  score_diff  31.40822166  27.2386530           40.2910345
## 7             shotgun_success  29.12646512  14.9928905           31.9750791
## 8  posteam_timeouts_remaining  21.19249086  26.6257608           30.6409621
## 9                shotgun_rate  27.90954670  11.2344998           30.1117099
## 10           vegas_wp_posteam  20.68054549  14.1342402           25.0807076
## 11            singleback_rate  21.86050288   8.5214470           23.9669692
## 12                 empty_rate  20.17581570   2.8931872           20.5883588
## 13 defteam_timeouts_remaining  10.32356144   7.6027076           13.2249245
## 14                cover1_rate  10.38164189   5.2451517           12.3377495
## 15              empty_success  11.40242673  -2.1039360           11.6182945
## 16         singleback_success  10.68866267  -3.9062038           10.3146197
## 17                cover4_rate   7.01022754   8.2958776            9.6450464
## 18                cover0_rate   7.93042320   4.6544698            8.8590980
## 19                cover2_rate   6.29493733   7.8009410            8.7611534
## 20               team_win_pct   8.13787340   2.8987929            8.7519108
## 21                cover3_rate   6.30025983   4.8016184            8.1290090
## 22          posteam_type_home   4.00421481   8.1878630            7.9981513
## 23                       week  -0.81415880  14.0180274            7.9054579
## 24                cover6_rate   6.56979671   3.7880410            7.8817354
## 25                  down4_pct   2.22276330   9.1665883            7.0958305
## 26            overall_win_pct   4.20663065   3.6171628            5.8042779
## 27    prev_singleback_success   2.65743578   5.1205814            4.8773963
## 28               two_man_rate   1.32667323   2.5586402            2.4849088
## 29               prev_win_pct   2.60459921  -0.4765219            2.1385962
## 30       prev_singleback_rate  -0.07848465   3.5699220            1.6688774
## 31          def_stop_rate_run  -1.16219923   4.6506865            1.6282205
## 32       prev_shotgun_success   1.10823709   0.9117861            1.4132041
## 33          prev_shotgun_rate   0.10552988   2.1144315            1.2313199
## 34                  down3_pct  -0.70883609   3.2063214            1.1267464
## 35         prev_empty_success  -1.02663426   2.8423008            0.6308453
## 36                       temp  -2.89656377   5.8475428            0.5220425
## 37                  down1_pct  -2.78467540   4.9660181            0.3654291
## 38           avg_pass_rushers  -1.52791411   2.2977893           -0.1320686
## 39         def_stop_rate_pass  -2.18584192   2.9880608           -0.2393464
## 40               prevent_rate  -1.78202762   2.1208787           -0.5561091
## 41          avg_box_defenders  -1.36446471   1.2353289           -0.6020392
## 42                       wind  -2.78606498   3.4073741           -0.6894820
## 43              roof_outdoors  -2.19279325   1.2773409           -1.1974087
## 44                 total_line  -4.85367468   4.6057799           -1.7508946
## 45            home_attendance  -5.03547720   4.8280188           -1.8509606
## 46                  down2_pct  -4.61131190   3.7585104           -2.0204871
## 47            prev_empty_rate  -4.93874540   2.0856739           -3.0868768
## 48         prev_stop_rate_run  -5.41579352   2.4718643           -3.5242842
## 49        prev_stop_rate_pass  -4.70570097   0.8521218           -3.6872793
## 50                  prep_days  -4.09721680  -0.8300250           -3.9821107
##    MeanDecreaseGini
## 1        1503.27140
## 2         837.03429
## 3         621.88521
## 4         510.54718
## 5         180.75449
## 6         394.56848
## 7         174.01044
## 8         151.23088
## 9         147.34512
## 10        343.19063
## 11        144.19299
## 12         94.06482
## 13         80.61260
## 14        102.27121
## 15         38.54901
## 16         45.16169
## 17        103.23999
## 18         96.09890
## 19        102.03947
## 20         99.07155
## 21        101.28314
## 22         21.83768
## 23         88.36604
## 24         99.27556
## 25         95.04066
## 26         71.88457
## 27        100.45825
## 28         84.22237
## 29         84.15316
## 30         97.72349
## 31        120.74476
## 32         99.22444
## 33         95.95857
## 34        119.34994
## 35         98.92444
## 36         90.36161
## 37        116.95558
## 38        118.74100
## 39        124.74427
## 40         65.93304
## 41        119.81404
## 42         69.09944
## 43         14.30507
## 44        107.35012
## 45        109.96339
## 46        114.24719
## 47         93.31904
## 48        107.80322
## 49        108.10879
## 50         55.05304</code></pre>
</div>
<div id="outcome-step" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Outcome Step</h1>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co">#kill - my_id</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>outcome_data <span class="ot">&lt;-</span> outcome_data[, my_id <span class="sc">:=</span> <span class="cn">NULL</span>]</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>outcome_data[, year2017_team_ARI <span class="sc">:=</span> <span class="cn">NULL</span>]</span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>outcome_data[, conversion <span class="sc">:=</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(conversion))]</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="co"># Then run OLS with GIMR correction</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>ols_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(conversion <span class="sc">~</span>  ., <span class="at">data =</span> outcome_data)</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co"># Load required libraries</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lmtest&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: package &#39;lmtest&#39; was built under R version 4.3.3</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sandwich&quot;</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co"># Run coeftest and print names, t-values, and p-values</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>coef_test <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(ols_model, <span class="at">vcov =</span> <span class="fu">vcovHC</span>(ols_model, <span class="at">type =</span> <span class="st">&quot;HC0&quot;</span>))</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(coef_test)) {</span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%-40s %8.3f %8.3f</span><span class="sc">\n</span><span class="st">&quot;</span>, </span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a>              <span class="fu">rownames</span>(coef_test)[i], </span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a>              coef_test[i, <span class="dv">3</span>],  <span class="co"># t-values (3rd column)</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a>              coef_test[i, <span class="dv">4</span>])) <span class="co"># p-values (4th column)</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## (Intercept)                                 2.297    0.022
## ydstogo                                   -13.703    0.000
## yardline_100                                4.972    0.000
## posteam_timeouts_remaining                  0.970    0.332
## defteam_timeouts_remaining                  1.048    0.295
## rush_attempt                                7.430    0.000
## week                                        0.856    0.392
## temp                                       -0.739    0.460
## wind                                        1.099    0.272
## vegas_wp                                    1.377    0.169
## vegas_wp_posteam                            0.872    0.383
## total_line                                  2.280    0.023
## prep_days                                   0.714    0.475
## overall_win_pct                             0.347    0.728
## team_win_pct                                0.801    0.423
## prev_shotgun_rate                           0.156    0.876
## prev_singleback_rate                       -0.005    0.996
## prev_empty_rate                             0.651    0.515
## prev_shotgun_success                       -1.363    0.173
## prev_singleback_success                     0.541    0.588
## prev_empty_success                          0.202    0.840
## prev_stop_rate_run                          0.297    0.767
## prev_stop_rate_pass                        -3.108    0.002
## shotgun_rate                                1.537    0.124
## singleback_rate                             0.941    0.347
## empty_rate                                  0.169    0.866
## shotgun_success                            -2.502    0.012
## singleback_success                         -0.899    0.368
## empty_success                              -0.785    0.433
## def_stop_rate_run                           1.557    0.120
## def_stop_rate_pass                         -1.866    0.062
## avg_pass_rushers                           -0.973    0.330
## avg_box_defenders                          -0.311    0.756
## cover0_rate                                -0.160    0.873
## cover1_rate                                -0.383    0.702
## cover2_rate                                -0.495    0.621
## cover3_rate                                 1.188    0.235
## cover4_rate                                 1.010    0.312
## cover6_rate                                -0.700    0.484
## two_man_rate                                1.543    0.123
## prevent_rate                                2.833    0.005
## home_attendance                            -0.287    0.774
## roof_outdoors                              -0.325    0.745
## posteam_type_away                           0.837    0.402
## offense_formation_EMPTY                     0.720    0.471
## offense_formation_SHOTGUN                   0.257    0.797
## offense_formation_SINGLEBACK               -0.431    0.666
## offense_player_9_run_blocking_zone_snap_counts_run_block_percent_12w    0.544    0.587
## offense_player_9_blocking_grades_block_percent_12w   -0.825    0.410
## offense_player_9_receiving_concept_slot_grades_pass_route_12w    0.997    0.319
## offense_player_8_receiving_grades_routes_12w   -0.290    0.772
## offense_player_4_rushing_grades_ypa_12w     1.411    0.158
## offense_player_9_receiving_concept_slot_yprr_12w    0.350    0.727
## offense_player_9_receiving_grades_yprr_12w   -1.035    0.301
## offense_player_9_blocking_grades_snap_counts_offense_2w    3.409    0.001
## offense_player_9_receiving_grades_slot_rate_12w    1.705    0.088
## offense_player_9_run_blocking_zone_grades_run_block_12w    1.949    0.051
## offense_player_9_receiving_depth_deep_route_rate_12w   -1.553    0.121
## offense_player_9_run_blocking_snap_counts_run_play_12w   -0.375    0.707
## offense_player_1_passing_concept_no_screen_grades_pass_12w    0.349    0.727
## offense_player_9_receiving_depth_medium_yprr_12w   -1.644    0.100
## offense_player_9_receiving_vs_scheme_zone_yprr_12w    0.503    0.615
## offense_player_9_weeks_found_12w           -2.147    0.032
## offense_player_9_receiving_depth_medium_grades_pass_route_12w    1.349    0.177
## offense_player_9_receiving_concept_slot_caught_percent_12w   -1.064    0.288
## offense_player_9_receiving_depth_medium_caught_percent_12w   -0.440    0.660
## offense_player_20_run_blocking_gap_grades_run_block_12w    0.703    0.482
## offense_player_9_receiving_depth_medium_longest_12w    0.295    0.768
## offense_player_1_passing_pressure_pressure_qb_rating_12w    1.170    0.242
## offense_player_8_receiving_depth_center_short_yards_after_catch_12w   -0.743    0.458
## offense_player_9_receiving_grades_pass_plays_12w   -0.918    0.359
## offense_player_9_receiving_vs_scheme_man_route_rate_12w   -0.573    0.567
## offense_player_1_passing_pressure_no_pressure_avg_time_to_throw_2w   -0.222    0.825
## offense_player_9_receiving_vs_scheme_man_grades_pass_route_12w   -0.054    0.957
## offense_player_9_receiving_concept_slot_targets_percent_2w   -2.976    0.003
## offense_player_9_run_blocking_gap_snap_counts_run_block_percent_12w    0.331    0.740
## year2017_team_BUF                          -0.891    0.373
## year2017_team_CHI                          -0.216    0.829
## year2017_team_CLE                           0.618    0.536
## year2017_team_DAL                          -1.261    0.207
## year2017_team_DET                          -0.781    0.435
## year2017_team_GB                            1.857    0.063
## year2017_team_HOU                           1.665    0.096
## year2017_team_MIA                          -1.585    0.113
## year2017_team_MIN                          -0.986    0.324
## year2017_team_NE                           -0.338    0.735
## year2017_team_SF                            1.727    0.084
## year2017_team_BAL                          -0.142    0.887
## year2017_team_DEN                          -0.169    0.866
## year2017_team_LA                            0.165    0.869
## year2017_team_NYG                          -0.928    0.353
## year2017_team_OAK                          -1.070    0.285
## year2017_team_SEA                           0.411    0.681
## year2017_team_CAR                           0.111    0.912
## year2017_team_CIN                           0.635    0.526
## year2017_team_IND                           0.670    0.503
## year2017_team_NO                            0.692    0.489
## year2017_team_PHI                           0.128    0.898
## year2017_team_PIT                          -1.174    0.241
## year2017_team_TEN                          -0.202    0.840
## year2017_team_WAS                           0.322    0.747
## year2017_team_KC                            1.292    0.196
## year2017_team_LAC                          -0.231    0.817
## year2017_team_NYJ                           0.752    0.452
## year2017_team_TB                            0.104    0.917
## year2017_team_ATL                          -0.170    0.865
## year2017_team_JAX                           0.455    0.649
## year2018_team_ARI                           0.048    0.962
## year2018_team_BAL                           0.101    0.920
## year2018_team_CAR                          -0.020    0.984
## year2018_team_CLE                          -0.329    0.742
## year2018_team_DET                           0.145    0.885
## year2018_team_HOU                           0.698    0.485
## year2018_team_IND                          -0.619    0.536
## year2018_team_KC                            0.400    0.689
## year2018_team_NYG                           0.485    0.628
## year2018_team_OAK                          -0.523    0.601
## year2018_team_PHI                           0.130    0.896
## year2018_team_SEA                          -0.609    0.542
## year2018_team_BUF                          -0.584    0.559
## year2018_team_CHI                          -0.167    0.867
## year2018_team_CIN                          -0.668    0.504
## year2018_team_DAL                          -0.540    0.589
## year2018_team_DEN                          -0.488    0.626
## year2018_team_GB                           -0.456    0.648
## year2018_team_LAC                           0.278    0.781
## year2018_team_NE                           -0.552    0.581
## year2018_team_NO                            0.169    0.866
## year2018_team_PIT                           0.296    0.767
## year2018_team_SF                           -0.052    0.958
## year2018_team_MIA                           0.270    0.787
## year2018_team_MIN                           0.020    0.984
## year2018_team_NYJ                           0.496    0.620
## year2018_team_TB                            0.029    0.977
## year2018_team_ATL                          -0.009    0.993
## year2018_team_JAX                          -0.174    0.862
## year2018_team_LA                           -0.988    0.323
## year2018_team_TEN                           0.414    0.679
## year2018_team_WAS                          -0.182    0.855
## year2019_team_ARI                          -0.583    0.560
## year2019_team_BUF                          -0.848    0.396
## year2019_team_CHI                           0.068    0.946
## year2019_team_CLE                           0.217    0.829
## year2019_team_DAL                          -0.567    0.571
## year2019_team_IND                          -0.447    0.655
## year2019_team_JAX                          -0.107    0.915
## year2019_team_KC                           -0.115    0.908
## year2019_team_LAC                          -0.938    0.348
## year2019_team_MIN                          -0.542    0.588
## year2019_team_NE                            0.125    0.901
## year2019_team_NO                           -0.961    0.337
## year2019_team_PHI                          -0.053    0.958
## year2019_team_SEA                          -0.156    0.876
## year2019_team_SF                           -0.358    0.720
## year2019_team_TB                           -0.785    0.433
## year2019_team_BAL                          -0.115    0.909
## year2019_team_CAR                          -0.334    0.739
## year2019_team_DEN                           0.313    0.754
## year2019_team_DET                          -0.602    0.547
## year2019_team_HOU                          -0.458    0.647
## year2019_team_LA                           -0.979    0.327
## year2019_team_MIA                          -1.455    0.146
## year2019_team_NYG                          -0.982    0.326
## year2019_team_NYJ                          -1.204    0.229
## year2019_team_OAK                          -0.468    0.640
## year2019_team_PIT                          -1.720    0.085
## year2019_team_TEN                          -0.835    0.404
## year2019_team_CIN                           0.047    0.962
## year2019_team_WAS                          -0.550    0.582
## year2019_team_ATL                          -0.036    0.972
## year2019_team_GB                           -0.222    0.824
## year2020_team_ATL                           0.070    0.944
## year2020_team_BAL                           0.093    0.926
## year2020_team_BUF                          -0.220    0.826
## year2020_team_CAR                           0.829    0.407
## year2020_team_CIN                           0.484    0.629
## year2020_team_DEN                          -0.451    0.652
## year2020_team_DET                          -0.809    0.418
## year2020_team_JAX                          -0.837    0.402
## year2020_team_KC                           -0.019    0.985
## year2020_team_LA                           -0.965    0.335
## year2020_team_MIN                           0.566    0.572
## year2020_team_NE                           -0.431    0.666
## year2020_team_NO                            0.036    0.971
## year2020_team_NYG                           0.113    0.910
## year2020_team_SF                            0.099    0.921
## year2020_team_WAS                           0.236    0.814
## year2020_team_CHI                           0.056    0.955
## year2020_team_DAL                          -0.167    0.868
## year2020_team_GB                           -0.123    0.902
## year2020_team_HOU                          -0.660    0.509
## year2020_team_MIA                          -1.079    0.281
## year2020_team_NYJ                          -0.143    0.886
## year2020_team_TB                            0.540    0.589
## year2020_team_TEN                          -0.424    0.672
## year2020_team_ARI                           0.403    0.687
## year2020_team_CLE                          -1.088    0.276
## year2020_team_IND                          -0.692    0.489
## year2020_team_LAC                           0.116    0.908
## year2020_team_PHI                           0.279    0.780
## year2020_team_SEA                          -0.358    0.720
## year2020_team_LV                            0.455    0.649
## year2020_team_PIT                          -0.705    0.481
## year2021_team_ATL                          -1.028    0.304
## year2021_team_BUF                           0.076    0.939
## year2021_team_CIN                          -1.078    0.281
## year2021_team_DAL                          -0.241    0.810
## year2021_team_DEN                           0.310    0.756
## year2021_team_DET                          -0.551    0.581
## year2021_team_KC                           -0.020    0.984
## year2021_team_LA                           -0.013    0.990
## year2021_team_LV                            0.286    0.775
## year2021_team_MIN                          -0.357    0.721
## year2021_team_NE                            0.194    0.846
## year2021_team_NO                            0.022    0.983
## year2021_team_NYG                          -0.110    0.913
## year2021_team_SF                            0.083    0.934
## year2021_team_TEN                          -0.241    0.809
## year2021_team_ARI                           0.401    0.688
## year2021_team_BAL                           0.565    0.572
## year2021_team_CAR                          -0.236    0.813
## year2021_team_CHI                          -1.162    0.245
## year2021_team_GB                            0.480    0.631
## year2021_team_IND                          -0.407    0.684
## year2021_team_LAC                           0.053    0.957
## year2021_team_MIA                          -0.042    0.967
## year2021_team_NYJ                          -0.296    0.767
## year2021_team_PHI                          -0.906    0.365
## year2021_team_SEA                          -0.905    0.366
## year2021_team_TB                           -0.039    0.969
## year2021_team_WAS                          -0.673    0.501
## year2021_team_CLE                          -0.550    0.582
## year2021_team_HOU                          -0.253    0.801
## year2021_team_JAX                          -0.018    0.986
## year2021_team_PIT                          -0.219    0.827
## year2022_team_ARI                          -0.836    0.403
## year2022_team_ATL                          -1.409    0.159
## year2022_team_CAR                           0.491    0.624
## year2022_team_CHI                          -0.275    0.783
## year2022_team_CIN                          -0.733    0.463
## year2022_team_HOU                          -0.260    0.795
## year2022_team_IND                          -0.627    0.531
## year2022_team_LAC                          -0.535    0.593
## year2022_team_MIA                          -0.891    0.373
## year2022_team_SEA                           0.128    0.898
## year2022_team_TB                            0.174    0.862
## year2022_team_TEN                           0.770    0.441
## year2022_team_WAS                          -0.239    0.811
## year2022_team_BAL                          -0.928    0.354
## year2022_team_BUF                           0.220    0.826
## year2022_team_DAL                           0.198    0.843
## year2022_team_DET                          -0.405    0.686
## year2022_team_GB                           -0.641    0.522
## year2022_team_JAX                          -0.789    0.430
## year2022_team_KC                           -0.525    0.600
## year2022_team_LA                            0.657    0.511
## year2022_team_LV                            0.675    0.500
## year2022_team_NO                           -0.245    0.807
## year2022_team_PHI                           0.237    0.812
## year2022_team_PIT                           0.782    0.434
## year2022_team_CLE                          -0.122    0.903
## year2022_team_DEN                           0.322    0.748
## year2022_team_MIN                          -0.713    0.476
## year2022_team_NE                            0.258    0.796
## year2022_team_NYJ                          -0.745    0.456
## year2022_team_NYG                          -0.506    0.613
## year2022_team_SF                           -0.732    0.464
## year2023_team_BAL                          -0.256    0.798
## year2023_team_CHI                          -0.814    0.416
## year2023_team_CLE                          -0.688    0.491
## year2023_team_GB                            0.067    0.947
## year2023_team_IND                           0.412    0.680
## year2023_team_KC                           -0.011    0.992
## year2023_team_LAC                           0.079    0.937
## year2023_team_LV                           -0.054    0.957
## year2023_team_MIA                           0.100    0.920
## year2023_team_MIN                           1.062    0.288
## year2023_team_NO                           -0.335    0.737
## year2023_team_NYG                           0.481    0.630
## year2023_team_SEA                          -1.243    0.214
## year2023_team_SF                            0.264    0.792
## year2023_team_WAS                           0.797    0.426
## year2023_team_ATL                          -0.624    0.532
## year2023_team_BUF                          -0.588    0.556
## year2023_team_CAR                          -0.125    0.900
## year2023_team_DAL                           0.316    0.752
## year2023_team_DEN                          -0.128    0.898
## year2023_team_HOU                           0.047    0.962
## year2023_team_LA                            0.254    0.800
## year2023_team_NE                            0.043    0.966
## year2023_team_PHI                           0.062    0.951
## year2023_team_PIT                          -0.074    0.941
## year2023_team_TEN                           0.013    0.990
## year2023_team_ARI                          -0.764    0.445
## year2023_team_CIN                          -0.859    0.390
## year2023_team_DET                           0.112    0.911
## year2023_team_TB                            0.507    0.612
## year2023_team_JAX                          -0.363    0.717
## year2023_team_NYJ                           0.814    0.416
## is_first_half                              -0.879    0.380
## time_in_half                                1.775    0.076
## GIMR                                        2.215    0.027</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="co"># get vifs</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">library</span>(car)</span></code></pre></div>
<pre><code>## Warning: package &#39;car&#39; was built under R version 4.3.3</code></pre>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## Warning: package &#39;carData&#39; was built under R version 4.3.3</code></pre>
<pre><code>## 
## Attaching package: &#39;car&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     recode</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">vif</span>(ols_model)</span></code></pre></div>
<pre><code>##                                                              ydstogo 
##                                                             1.696296 
##                                                         yardline_100 
##                                                             1.368370 
##                                           posteam_timeouts_remaining 
##                                                             1.634167 
##                                           defteam_timeouts_remaining 
##                                                             1.551847 
##                                                         rush_attempt 
##                                                             1.984974 
##                                                                 week 
##                                                             1.881361 
##                                                                 temp 
##                                                             2.190642 
##                                                                 wind 
##                                                             2.222868 
##                                                             vegas_wp 
##                                                             2.335451 
##                                                     vegas_wp_posteam 
##                                                             1.988568 
##                                                           total_line 
##                                                             2.950533 
##                                                            prep_days 
##                                                             1.208224 
##                                                      overall_win_pct 
##                                                             3.437934 
##                                                         team_win_pct 
##                                                             4.025783 
##                                                    prev_shotgun_rate 
##                                                             3.565285 
##                                                 prev_singleback_rate 
##                                                             3.433578 
##                                                      prev_empty_rate 
##                                                             2.005074 
##                                                 prev_shotgun_success 
##                                                             2.143407 
##                                              prev_singleback_success 
##                                                             2.299848 
##                                                   prev_empty_success 
##                                                             2.180666 
##                                                   prev_stop_rate_run 
##                                                             2.456023 
##                                                  prev_stop_rate_pass 
##                                                             1.926728 
##                                                         shotgun_rate 
##                                                             2.629189 
##                                                      singleback_rate 
##                                                             2.308336 
##                                                           empty_rate 
##                                                             2.273015 
##                                                      shotgun_success 
##                                                             1.562242 
##                                                   singleback_success 
##                                                             1.695573 
##                                                        empty_success 
##                                                             1.787044 
##                                                    def_stop_rate_run 
##                                                             1.682168 
##                                                   def_stop_rate_pass 
##                                                             1.691445 
##                                                     avg_pass_rushers 
##                                                             2.392712 
##                                                    avg_box_defenders 
##                                                             2.202925 
##                                                          cover0_rate 
##                                                             2.500781 
##                                                          cover1_rate 
##                                                             6.002705 
##                                                          cover2_rate 
##                                                             3.260021 
##                                                          cover3_rate 
##                                                             6.260158 
##                                                          cover4_rate 
##                                                             3.433846 
##                                                          cover6_rate 
##                                                             2.867504 
##                                                         two_man_rate 
##                                                             1.751882 
##                                                         prevent_rate 
##                                                             1.493111 
##                                                      home_attendance 
##                                                             9.396572 
##                                                        roof_outdoors 
##                                                             2.392900 
##                                                    posteam_type_away 
##                                                             1.456046 
##                                              offense_formation_EMPTY 
##                                                             2.675755 
##                                            offense_formation_SHOTGUN 
##                                                             4.359362 
##                                         offense_formation_SINGLEBACK 
##                                                             2.234734 
## offense_player_9_run_blocking_zone_snap_counts_run_block_percent_12w 
##                                                            18.431301 
##                   offense_player_9_blocking_grades_block_percent_12w 
##                                                             9.218866 
##        offense_player_9_receiving_concept_slot_grades_pass_route_12w 
##                                                            47.186398 
##                         offense_player_8_receiving_grades_routes_12w 
##                                                             2.183781 
##                              offense_player_4_rushing_grades_ypa_12w 
##                                                             1.221582 
##                     offense_player_9_receiving_concept_slot_yprr_12w 
##                                                             2.691929 
##                           offense_player_9_receiving_grades_yprr_12w 
##                                                             9.544186 
##              offense_player_9_blocking_grades_snap_counts_offense_2w 
##                                                             4.712899 
##                      offense_player_9_receiving_grades_slot_rate_12w 
##                                                             2.239675 
##              offense_player_9_run_blocking_zone_grades_run_block_12w 
##                                                            54.367497 
##                 offense_player_9_receiving_depth_deep_route_rate_12w 
##                                                             4.343187 
##               offense_player_9_run_blocking_snap_counts_run_play_12w 
##                                                             9.492631 
##           offense_player_1_passing_concept_no_screen_grades_pass_12w 
##                                                             2.946740 
##                     offense_player_9_receiving_depth_medium_yprr_12w 
##                                                            12.347882 
##                   offense_player_9_receiving_vs_scheme_zone_yprr_12w 
##                                                             5.994057 
##                                     offense_player_9_weeks_found_12w 
##                                                            42.647028 
##        offense_player_9_receiving_depth_medium_grades_pass_route_12w 
##                                                            20.008358 
##           offense_player_9_receiving_concept_slot_caught_percent_12w 
##                                                             3.888278 
##           offense_player_9_receiving_depth_medium_caught_percent_12w 
##                                                            11.902583 
##              offense_player_20_run_blocking_gap_grades_run_block_12w 
##                                                             1.228798 
##                  offense_player_9_receiving_depth_medium_longest_12w 
##                                                             6.087463 
##             offense_player_1_passing_pressure_pressure_qb_rating_12w 
##                                                             2.565657 
##  offense_player_8_receiving_depth_center_short_yards_after_catch_12w 
##                                                             1.622875 
##                     offense_player_9_receiving_grades_pass_plays_12w 
##                                                            16.184804 
##              offense_player_9_receiving_vs_scheme_man_route_rate_12w 
##                                                            38.063567 
##   offense_player_1_passing_pressure_no_pressure_avg_time_to_throw_2w 
##                                                             1.825471 
##       offense_player_9_receiving_vs_scheme_man_grades_pass_route_12w 
##                                                            50.919160 
##           offense_player_9_receiving_concept_slot_targets_percent_2w 
##                                                             1.658258 
##  offense_player_9_run_blocking_gap_snap_counts_run_block_percent_12w 
##                                                            11.848986 
##                                                    year2017_team_BUF 
##                                                             2.223513 
##                                                    year2017_team_CHI 
##                                                             2.746886 
##                                                    year2017_team_CLE 
##                                                             2.390907 
##                                                    year2017_team_DAL 
##                                                             2.435216 
##                                                    year2017_team_DET 
##                                                             1.961370 
##                                                     year2017_team_GB 
##                                                             2.888895 
##                                                    year2017_team_HOU 
##                                                             1.644762 
##                                                    year2017_team_MIA 
##                                                             2.679869 
##                                                    year2017_team_MIN 
##                                                             2.302099 
##                                                     year2017_team_NE 
##                                                             2.508214 
##                                                     year2017_team_SF 
##                                                             1.888404 
##                                                    year2017_team_BAL 
##                                                             2.180711 
##                                                    year2017_team_DEN 
##                                                             2.448148 
##                                                     year2017_team_LA 
##                                                             2.372269 
##                                                    year2017_team_NYG 
##                                                             2.893691 
##                                                    year2017_team_OAK 
##                                                             2.410085 
##                                                    year2017_team_SEA 
##                                                             1.908701 
##                                                    year2017_team_CAR 
##                                                             1.772693 
##                                                    year2017_team_CIN 
##                                                             2.198232 
##                                                    year2017_team_IND 
##                                                             2.525656 
##                                                     year2017_team_NO 
##                                                             1.864945 
##                                                    year2017_team_PHI 
##                                                             2.302080 
##                                                    year2017_team_PIT 
##                                                             1.740984 
##                                                    year2017_team_TEN 
##                                                             1.711557 
##                                                    year2017_team_WAS 
##                                                             1.779624 
##                                                     year2017_team_KC 
##                                                             1.970187 
##                                                    year2017_team_LAC 
##                                                             2.028936 
##                                                    year2017_team_NYJ 
##                                                             1.838483 
##                                                     year2017_team_TB 
##                                                             1.679339 
##                                                    year2017_team_ATL 
##                                                             2.138911 
##                                                    year2017_team_JAX 
##                                                             1.877822 
##                                                    year2018_team_ARI 
##                                                             3.556830 
##                                                    year2018_team_BAL 
##                                                             4.287285 
##                                                    year2018_team_CAR 
##                                                             3.621325 
##                                                    year2018_team_CLE 
##                                                             4.230773 
##                                                    year2018_team_DET 
##                                                             3.326317 
##                                                    year2018_team_HOU 
##                                                             2.876168 
##                                                    year2018_team_IND 
##                                                             3.339593 
##                                                     year2018_team_KC 
##                                                             3.572341 
##                                                    year2018_team_NYG 
##                                                             2.640198 
##                                                    year2018_team_OAK 
##                                                             2.795838 
##                                                    year2018_team_PHI 
##                                                             4.416161 
##                                                    year2018_team_SEA 
##                                                             2.438852 
##                                                    year2018_team_BUF 
##                                                             2.708560 
##                                                    year2018_team_CHI 
##                                                             4.197370 
##                                                    year2018_team_CIN 
##                                                             2.931315 
##                                                    year2018_team_DAL 
##                                                             3.662079 
##                                                    year2018_team_DEN 
##                                                             3.249424 
##                                                     year2018_team_GB 
##                                                             2.834343 
##                                                    year2018_team_LAC 
##                                                             3.250636 
##                                                     year2018_team_NE 
##                                                             2.603002 
##                                                     year2018_team_NO 
##                                                             3.624015 
##                                                    year2018_team_PIT 
##                                                             2.251393 
##                                                     year2018_team_SF 
##                                                             2.554875 
##                                                    year2018_team_MIA 
##                                                             2.947950 
##                                                    year2018_team_MIN 
##                                                             3.174831 
##                                                    year2018_team_NYJ 
##                                                             1.782704 
##                                                     year2018_team_TB 
##                                                             3.084621 
##                                                    year2018_team_ATL 
##                                                             4.003207 
##                                                    year2018_team_JAX 
##                                                             3.273007 
##                                                     year2018_team_LA 
##                                                             2.501694 
##                                                    year2018_team_TEN 
##                                                             2.323059 
##                                                    year2018_team_WAS 
##                                                             2.558554 
##                                                    year2019_team_ARI 
##                                                             3.461386 
##                                                    year2019_team_BUF 
##                                                             4.397023 
##                                                    year2019_team_CHI 
##                                                             3.864854 
##                                                    year2019_team_CLE 
##                                                             3.172815 
##                                                    year2019_team_DAL 
##                                                             3.146711 
##                                                    year2019_team_IND 
##                                                             3.958289 
##                                                    year2019_team_JAX 
##                                                             3.417173 
##                                                     year2019_team_KC 
##                                                             3.194969 
##                                                    year2019_team_LAC 
##                                                             3.297083 
##                                                    year2019_team_MIN 
##                                                             3.784751 
##                                                     year2019_team_NE 
##                                                             3.514210 
##                                                     year2019_team_NO 
##                                                             3.642507 
##                                                    year2019_team_PHI 
##                                                             4.209724 
##                                                    year2019_team_SEA 
##                                                             2.512561 
##                                                     year2019_team_SF 
##                                                             4.137129 
##                                                     year2019_team_TB 
##                                                             3.975928 
##                                                    year2019_team_BAL 
##                                                             3.742821 
##                                                    year2019_team_CAR 
##                                                             3.033147 
##                                                    year2019_team_DEN 
##                                                             3.231860 
##                                                    year2019_team_DET 
##                                                             2.917370 
##                                                    year2019_team_HOU 
##                                                             3.818958 
##                                                     year2019_team_LA 
##                                                             2.679291 
##                                                    year2019_team_MIA 
##                                                             3.183034 
##                                                    year2019_team_NYG 
##                                                             3.290421 
##                                                    year2019_team_NYJ 
##                                                             3.092432 
##                                                    year2019_team_OAK 
##                                                             3.569524 
##                                                    year2019_team_PIT 
##                                                             2.243767 
##                                                    year2019_team_TEN 
##                                                             3.387462 
##                                                    year2019_team_CIN 
##                                                             3.394227 
##                                                    year2019_team_WAS 
##                                                             3.259081 
##                                                    year2019_team_ATL 
##                                                             3.489461 
##                                                     year2019_team_GB 
##                                                             3.164931 
##                                                    year2020_team_ATL 
##                                                             5.072362 
##                                                    year2020_team_BAL 
##                                                             5.382932 
##                                                    year2020_team_BUF 
##                                                             3.350883 
##                                                    year2020_team_CAR 
##                                                             3.285481 
##                                                    year2020_team_CIN 
##                                                             4.293532 
##                                                    year2020_team_DEN 
##                                                             3.421190 
##                                                    year2020_team_DET 
##                                                             3.871939 
##                                                    year2020_team_JAX 
##                                                             4.294551 
##                                                     year2020_team_KC 
##                                                             3.331863 
##                                                     year2020_team_LA 
##                                                             3.734068 
##                                                    year2020_team_MIN 
##                                                             5.621073 
##                                                     year2020_team_NE 
##                                                             4.077055 
##                                                     year2020_team_NO 
##                                                             5.845622 
##                                                    year2020_team_NYG 
##                                                             3.865805 
##                                                     year2020_team_SF 
##                                                             3.456767 
##                                                    year2020_team_WAS 
##                                                             3.995280 
##                                                    year2020_team_CHI 
##                                                             4.099959 
##                                                    year2020_team_DAL 
##                                                             5.076571 
##                                                     year2020_team_GB 
##                                                             3.451640 
##                                                    year2020_team_HOU 
##                                                             3.660775 
##                                                    year2020_team_MIA 
##                                                             3.974021 
##                                                    year2020_team_NYJ 
##                                                             3.216869 
##                                                     year2020_team_TB 
##                                                             3.837304 
##                                                    year2020_team_TEN 
##                                                             3.536559 
##                                                    year2020_team_ARI 
##                                                             3.406720 
##                                                    year2020_team_CLE 
##                                                             4.116141 
##                                                    year2020_team_IND 
##                                                             3.474526 
##                                                    year2020_team_LAC 
##                                                             3.709450 
##                                                    year2020_team_PHI 
##                                                             4.481561 
##                                                    year2020_team_SEA 
##                                                             3.763016 
##                                                     year2020_team_LV 
##                                                             3.814299 
##                                                    year2020_team_PIT 
##                                                             2.967318 
##                                                    year2021_team_ATL 
##                                                             4.638624 
##                                                    year2021_team_BUF 
##                                                             5.250638 
##                                                    year2021_team_CIN 
##                                                             3.735479 
##                                                    year2021_team_DAL 
##                                                             3.920857 
##                                                    year2021_team_DEN 
##                                                             4.708074 
##                                                    year2021_team_DET 
##                                                             4.231490 
##                                                     year2021_team_KC 
##                                                             4.146805 
##                                                     year2021_team_LA 
##                                                             4.715757 
##                                                     year2021_team_LV 
##                                                             3.100670 
##                                                    year2021_team_MIN 
##                                                             4.694193 
##                                                     year2021_team_NE 
##                                                             4.012178 
##                                                     year2021_team_NO 
##                                                             4.078030 
##                                                    year2021_team_NYG 
##                                                             4.339548 
##                                                     year2021_team_SF 
##                                                             3.588036 
##                                                    year2021_team_TEN 
##                                                             4.499686 
##                                                    year2021_team_ARI 
##                                                             4.871486 
##                                                    year2021_team_BAL 
##                                                             2.955235 
##                                                    year2021_team_CAR 
##                                                             5.616134 
##                                                    year2021_team_CHI 
##                                                             4.327668 
##                                                     year2021_team_GB 
##                                                             4.731347 
##                                                    year2021_team_IND 
##                                                             4.304702 
##                                                    year2021_team_LAC 
##                                                             3.956118 
##                                                    year2021_team_MIA 
##                                                             3.946462 
##                                                    year2021_team_NYJ 
##                                                             3.558894 
##                                                    year2021_team_PHI 
##                                                             4.999691 
##                                                    year2021_team_SEA 
##                                                             2.997511 
##                                                     year2021_team_TB 
##                                                             3.897689 
##                                                    year2021_team_WAS 
##                                                             5.429435 
##                                                    year2021_team_CLE 
##                                                             4.477151 
##                                                    year2021_team_HOU 
##                                                             4.105508 
##                                                    year2021_team_JAX 
##                                                             3.532627 
##                                                    year2021_team_PIT 
##                                                             3.910832 
##                                                    year2022_team_ARI 
##                                                             4.955636 
##                                                    year2022_team_ATL 
##                                                             3.691650 
##                                                    year2022_team_CAR 
##                                                             2.985376 
##                                                    year2022_team_CHI 
##                                                             2.590592 
##                                                    year2022_team_CIN 
##                                                             3.128313 
##                                                    year2022_team_HOU 
##                                                             4.179852 
##                                                    year2022_team_IND 
##                                                             4.062764 
##                                                    year2022_team_LAC 
##                                                             4.361481 
##                                                    year2022_team_MIA 
##                                                             4.916561 
##                                                    year2022_team_SEA 
##                                                             4.140338 
##                                                     year2022_team_TB 
##                                                             5.064080 
##                                                    year2022_team_TEN 
##                                                             4.810784 
##                                                    year2022_team_WAS 
##                                                             4.364269 
##                                                    year2022_team_BAL 
##                                                             3.792626 
##                                                    year2022_team_BUF 
##                                                             4.080145 
##                                                    year2022_team_DAL 
##                                                             2.592203 
##                                                    year2022_team_DET 
##                                                             5.286842 
##                                                     year2022_team_GB 
##                                                             3.831692 
##                                                    year2022_team_JAX 
##                                                             5.585561 
##                                                     year2022_team_KC 
##                                                             2.767125 
##                                                     year2022_team_LA 
##                                                             3.384845 
##                                                     year2022_team_LV 
##                                                             3.516511 
##                                                     year2022_team_NO 
##                                                             2.918727 
##                                                    year2022_team_PHI 
##                                                             4.250742 
##                                                    year2022_team_PIT 
##                                                             3.530793 
##                                                    year2022_team_CLE 
##                                                             5.246551 
##                                                    year2022_team_DEN 
##                                                             4.292961 
##                                                    year2022_team_MIN 
##                                                             3.440434 
##                                                     year2022_team_NE 
##                                                             3.505252 
##                                                    year2022_team_NYJ 
##                                                             4.137714 
##                                                    year2022_team_NYG 
##                                                             3.571259 
##                                                     year2022_team_SF 
##                                                             2.280635 
##                                                    year2023_team_BAL 
##                                                             4.132422 
##                                                    year2023_team_CHI 
##                                                             3.891955 
##                                                    year2023_team_CLE 
##                                                             3.198727 
##                                                     year2023_team_GB 
##                                                             4.086150 
##                                                    year2023_team_IND 
##                                                             3.928485 
##                                                     year2023_team_KC 
##                                                             3.533154 
##                                                    year2023_team_LAC 
##                                                             3.916471 
##                                                     year2023_team_LV 
##                                                             4.284344 
##                                                    year2023_team_MIA 
##                                                             3.633537 
##                                                    year2023_team_MIN 
##                                                             4.342131 
##                                                     year2023_team_NO 
##                                                             3.410517 
##                                                    year2023_team_NYG 
##                                                             5.132268 
##                                                    year2023_team_SEA 
##                                                             4.130019 
##                                                     year2023_team_SF 
##                                                             3.482111 
##                                                    year2023_team_WAS 
##                                                             4.405234 
##                                                    year2023_team_ATL 
##                                                             3.173467 
##                                                    year2023_team_BUF 
##                                                             2.767029 
##                                                    year2023_team_CAR 
##                                                             4.411963 
##                                                    year2023_team_DAL 
##                                                             3.535071 
##                                                    year2023_team_DEN 
##                                                             4.053827 
##                                                    year2023_team_HOU 
##                                                             2.579384 
##                                                     year2023_team_LA 
##                                                             3.008275 
##                                                     year2023_team_NE 
##                                                             3.283790 
##                                                    year2023_team_PHI 
##                                                             4.077518 
##                                                    year2023_team_PIT 
##                                                             2.630760 
##                                                    year2023_team_TEN 
##                                                             3.052877 
##                                                    year2023_team_ARI 
##                                                             3.527081 
##                                                    year2023_team_CIN 
##                                                             2.940229 
##                                                    year2023_team_DET 
##                                                             5.517254 
##                                                     year2023_team_TB 
##                                                             4.305519 
##                                                    year2023_team_JAX 
##                                                             3.237528 
##                                                    year2023_team_NYJ 
##                                                             2.810373 
##                                                        is_first_half 
##                                                             1.319351 
##                                                         time_in_half 
##                                                             1.920562 
##                                                                 GIMR 
##                                                             1.572056</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
