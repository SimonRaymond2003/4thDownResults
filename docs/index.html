<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Simon Raymond" />

<meta name="date" content="2025-01-31" />

<title>A Nonparametric Implementation of the Heckman Correction in 4th Downs in the NFL</title>

<script src="site_libs/header-attrs-2.29/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/cosmo.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/jqueryui-1.13.2/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/pagedtable-1.1/css/pagedtable.css" rel="stylesheet" />
<script src="site_libs/pagedtable-1.1/js/pagedtable.js"></script>

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>



<style type="text/css">
  code {
    white-space: pre;
  }
  .sourceCode {
    overflow: visible;
  }
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  background-color: #f8f8f8; }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ef2929; } /* Alert */
code span.an { color: #8f5902; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #204a87; } /* Attribute */
code span.bn { color: #0000cf; } /* BaseN */
code span.cf { color: #204a87; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4e9a06; } /* Char */
code span.cn { color: #8f5902; } /* Constant */
code span.co { color: #8f5902; font-style: italic; } /* Comment */
code span.cv { color: #8f5902; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #8f5902; font-weight: bold; font-style: italic; } /* Documentation */
code span.dt { color: #204a87; } /* DataType */
code span.dv { color: #0000cf; } /* DecVal */
code span.er { color: #a40000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #0000cf; } /* Float */
code span.fu { color: #204a87; font-weight: bold; } /* Function */
code span.im { } /* Import */
code span.in { color: #8f5902; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #204a87; font-weight: bold; } /* Keyword */
code span.op { color: #ce5c00; font-weight: bold; } /* Operator */
code span.ot { color: #8f5902; } /* Other */
code span.pp { color: #8f5902; font-style: italic; } /* Preprocessor */
code span.sc { color: #ce5c00; font-weight: bold; } /* SpecialChar */
code span.ss { color: #4e9a06; } /* SpecialString */
code span.st { color: #4e9a06; } /* String */
code span.va { color: #000000; } /* Variable */
code span.vs { color: #4e9a06; } /* VerbatimString */
code span.wa { color: #8f5902; font-weight: bold; font-style: italic; } /* Warning */

.sourceCode .row {
  width: 100%;
}
.sourceCode {
  overflow-x: auto;
}
.code-folding-btn {
  margin-right: -30px;
}
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<link rel="stylesheet" href="styles.css" type="text/css" />



<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>



<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>



<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}

@media print {
.toc-content {
  /* see https://github.com/w3c/csswg-drafts/issues/4434 */
  float: right;
}
}

.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>



</head>

<body>


<div class="container-fluid main-container">


<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore"><strong>A Nonparametric Implementation of
the Heckman Correction in 4th Downs in the NFL</strong></h1>
<h4 class="author"><strong>Simon Raymond</strong></h4>
<h4 class="date"><strong>January 31, 2025</strong></h4>

</div>


<div id="setup" class="section level1" number="1">
<h1><span class="header-section-number">1</span> Setup</h1>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-2"><a href="#cb1-2" tabindex="-1"></a>outcome_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;predict_outcome.csv.gz&quot;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" tabindex="-1"></a>select_data <span class="ot">&lt;-</span> <span class="fu">fread</span>(<span class="st">&quot;predict_select.csv.gz&quot;</span>)</span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;dplyr&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:data.table&#39;:
## 
##     between, first, last</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     filter, lag</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     intersect, setdiff, setequal, union</code></pre>
<pre><code>## 
## Attaching package: &#39;gridExtra&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a>select_data[, attempt <span class="sc">:=</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(attempt))]</span></code></pre></div>
</div>
<div id="selection-step" class="section level1" number="2">
<h1><span class="header-section-number">2</span> Selection Step</h1>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a><span class="fu">library</span>(randomForest)</span></code></pre></div>
<pre><code>## randomForest 4.7-1.1</code></pre>
<pre><code>## Type rfNews() to see new features/changes/bug fixes.</code></pre>
<pre><code>## 
## Attaching package: &#39;randomForest&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:gridExtra&#39;:
## 
##     combine</code></pre>
<pre><code>## The following object is masked from &#39;package:ggplot2&#39;:
## 
##     margin</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     combine</code></pre>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co"># Convert attempt to factor</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a>select_data<span class="sc">$</span>attempt <span class="ot">&lt;-</span> <span class="fu">as.factor</span>(select_data<span class="sc">$</span>attempt)</span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" tabindex="-1"></a><span class="co"># Fit random forest model</span></span>
<span id="cb16-5"><a href="#cb16-5" tabindex="-1"></a>rf_model <span class="ot">&lt;-</span> <span class="fu">randomForest</span>(</span>
<span id="cb16-6"><a href="#cb16-6" tabindex="-1"></a>  attempt <span class="sc">~</span> . <span class="sc">-</span> my_id,</span>
<span id="cb16-7"><a href="#cb16-7" tabindex="-1"></a>  <span class="at">data =</span> select_data,</span>
<span id="cb16-8"><a href="#cb16-8" tabindex="-1"></a>  <span class="at">ntree =</span> <span class="dv">500</span>,</span>
<span id="cb16-9"><a href="#cb16-9" tabindex="-1"></a>  <span class="at">nodesize =</span> <span class="dv">1</span>,</span>
<span id="cb16-10"><a href="#cb16-10" tabindex="-1"></a>  <span class="at">importance =</span> <span class="cn">TRUE</span>,</span>
<span id="cb16-11"><a href="#cb16-11" tabindex="-1"></a>  <span class="at">probability =</span> <span class="cn">TRUE</span></span>
<span id="cb16-12"><a href="#cb16-12" tabindex="-1"></a>)</span>
<span id="cb16-13"><a href="#cb16-13" tabindex="-1"></a></span>
<span id="cb16-14"><a href="#cb16-14" tabindex="-1"></a><span class="co"># Calculate OOB AUC</span></span>
<span id="cb16-15"><a href="#cb16-15" tabindex="-1"></a><span class="fu">library</span>(pROC)</span></code></pre></div>
<pre><code>## Type &#39;citation(&quot;pROC&quot;)&#39; for a citation.</code></pre>
<pre><code>## 
## Attaching package: &#39;pROC&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:stats&#39;:
## 
##     cov, smooth, var</code></pre>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a>oob_pred <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, <span class="at">type =</span> <span class="st">&quot;prob&quot;</span>)[,<span class="dv">2</span>]</span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a>oob_auc <span class="ot">&lt;-</span> <span class="fu">auc</span>(<span class="fu">roc</span>(select_data<span class="sc">$</span>attempt, oob_pred))</span></code></pre></div>
<pre><code>## Setting levels: control = 0, case = 1</code></pre>
<pre><code>## Setting direction: controls &lt; cases</code></pre>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="fu">print</span>(<span class="fu">paste</span>(<span class="st">&quot;OOB AUC:&quot;</span>, <span class="fu">round</span>(oob_auc, <span class="dv">3</span>)))</span></code></pre></div>
<pre><code>## [1] &quot;OOB AUC: 0.859&quot;</code></pre>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a><span class="co"># Get probability predictions for GIMR</span></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a>z <span class="ot">&lt;-</span> <span class="fu">predict</span>(rf_model, <span class="at">newdata =</span> select_data, <span class="at">type =</span> <span class="st">&quot;prob&quot;</span>)[,<span class="dv">2</span>]</span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co"># Calculate residuals for RF predictions</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a>y <span class="ot">&lt;-</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(select_data<span class="sc">$</span>attempt))</span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>residuals <span class="ot">&lt;-</span> y <span class="sc">-</span> z</span></code></pre></div>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co"># Histogram of residuals</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="fu">hist</span>(residuals, <span class="at">main=</span><span class="st">&quot;Distribution of RF Model Residuals&quot;</span>, <span class="at">xlab=</span><span class="st">&quot;Residual&quot;</span>, <span class="at">breaks=</span><span class="dv">50</span>)</span></code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<div class="sourceCode" id="cb27"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co"># plot out the z values\</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="fu">plot</span>(<span class="fu">density</span>(z), </span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a>     <span class="at">main =</span> <span class="st">&quot;Density of Z Predictions&quot;</span>,</span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a>     <span class="at">xlab =</span> <span class="st">&quot;Predicted Probability of Attempt&quot;</span>,</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>     <span class="at">ylab =</span> <span class="st">&quot;Density&quot;</span>)</span></code></pre></div>
<p><img src="index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="co"># Calculate GIMR (lambda) This is Generalized inverse mills ratio</span></span>
<span id="cb28-2"><a href="#cb28-2" tabindex="-1"></a>GIMR <span class="ot">&lt;-</span> <span class="fu">dnorm</span>(<span class="fu">qnorm</span>(z)) <span class="sc">/</span> (<span class="dv">1</span> <span class="sc">-</span> <span class="fu">pnorm</span>(<span class="fu">qnorm</span>(z)))</span>
<span id="cb28-3"><a href="#cb28-3" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" tabindex="-1"></a><span class="co"># Add GIMR to the data</span></span>
<span id="cb28-5"><a href="#cb28-5" tabindex="-1"></a>select_data[, GIMR <span class="sc">:=</span> GIMR]</span>
<span id="cb28-6"><a href="#cb28-6" tabindex="-1"></a></span>
<span id="cb28-7"><a href="#cb28-7" tabindex="-1"></a><span class="co"># Create a data.table with just my_id and GIMR from select_data</span></span>
<span id="cb28-8"><a href="#cb28-8" tabindex="-1"></a>GIMR_dt <span class="ot">&lt;-</span> <span class="fu">data.table</span>(<span class="at">my_id =</span> select_data<span class="sc">$</span>my_id, <span class="at">GIMR =</span> GIMR)</span>
<span id="cb28-9"><a href="#cb28-9" tabindex="-1"></a></span>
<span id="cb28-10"><a href="#cb28-10" tabindex="-1"></a><span class="co"># Add GIMR to outcome_data by matching on my_id</span></span>
<span id="cb28-11"><a href="#cb28-11" tabindex="-1"></a>outcome_data[GIMR_dt, GIMR <span class="sc">:=</span> i.GIMR, on <span class="ot">=</span> <span class="st">&quot;my_id&quot;</span>]</span></code></pre></div>
<div class="sourceCode" id="cb29"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb29-2"><a href="#cb29-2" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" tabindex="-1"></a>importance_df <span class="ot">&lt;-</span> <span class="fu">importance</span>(rf_model) <span class="sc">%&gt;%</span></span>
<span id="cb29-4"><a href="#cb29-4" tabindex="-1"></a>  <span class="fu">as.data.frame</span>() <span class="sc">%&gt;%</span></span>
<span id="cb29-5"><a href="#cb29-5" tabindex="-1"></a>  <span class="fu">rownames_to_column</span>(<span class="st">&quot;Variable&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb29-6"><a href="#cb29-6" tabindex="-1"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(MeanDecreaseAccuracy))</span>
<span id="cb29-7"><a href="#cb29-7" tabindex="-1"></a></span>
<span id="cb29-8"><a href="#cb29-8" tabindex="-1"></a><span class="co"># Print results</span></span>
<span id="cb29-9"><a href="#cb29-9" tabindex="-1"></a><span class="fu">print</span>(importance_df)</span></code></pre></div>
<pre><code>##                      Variable            0           1 MeanDecreaseAccuracy
## 1                     ydstogo 123.67051190 137.3649883          149.4780976
## 2                yardline_100  45.61123832  88.3988929           80.1943361
## 3                    vegas_wp  41.56843818  45.3597493           59.9269335
## 4                time_in_half  33.27225666  53.0395952           54.5408342
## 5               is_first_half  21.70509866  46.9896770           47.8841734
## 6                  score_diff  33.61741746  28.0590063           43.3726060
## 7             shotgun_success  29.79715890  16.5060193           34.2406323
## 8  posteam_timeouts_remaining  20.56210189  25.0391045           27.5098895
## 9                shotgun_rate  25.62691365   7.1171994           26.8377202
## 10            singleback_rate  24.60223185   7.1986514           26.2895081
## 11           vegas_wp_posteam  20.30448382  13.5777129           24.6580657
## 12                 empty_rate  19.07509546   2.5653560           20.1188960
## 13         singleback_success  12.63992162  -4.5287064           11.9469027
## 14                cover1_rate   9.85429804   5.4010414           11.8504540
## 15 defteam_timeouts_remaining   8.11219773   9.0368087           11.5978114
## 16              empty_success  10.94932790  -0.6371081           11.4030590
## 17                cover0_rate   9.50539916   3.7993628           10.7357285
## 18                cover3_rate   8.67130180   6.6913504           10.4150780
## 19                cover4_rate   6.64300278   8.4050774            9.6899857
## 20                       week  -0.59078165  16.1787601            8.2973151
## 21               team_win_pct   7.15145661   3.8623459            8.0641577
## 22          posteam_type_home   5.57766553   5.9924736            7.7918610
## 23                cover6_rate   5.49484922   4.7736466            7.4807315
## 24                cover2_rate   5.34990802   5.7640866            7.4185342
## 25                  down4_pct   0.93152629   8.8608176            6.3146311
## 26    prev_singleback_success   4.53279982   4.0652730            6.2021929
## 27            overall_win_pct   4.00782195   1.8384113            4.7304294
## 28          def_stop_rate_run   0.04995238   6.0276510            3.4494560
## 29               prev_win_pct   2.72124068   1.8723530            3.4233532
## 30          prev_shotgun_rate   0.97786246   4.2169498            3.2651248
## 31                  down3_pct   0.50396537   4.4264229            3.1047888
## 32               two_man_rate   2.23585004   2.5153363            3.0809149
## 33         prev_empty_success   1.02530358   2.6298263            2.4039203
## 34       prev_singleback_rate   0.52972591   2.5152832            1.8248968
## 35         def_stop_rate_pass  -0.12544973   3.2091046            1.7084327
## 36               prevent_rate  -0.30588314   3.7164093            1.5778331
## 37       prev_shotgun_success   1.35287832   0.4394164            1.4027905
## 38                       temp  -0.98824615   3.9041108            1.1432228
## 39                  down1_pct  -1.72857257   3.8757438            0.4873482
## 40          avg_box_defenders  -0.76714973   0.3166108           -0.5287642
## 41                  down2_pct  -2.82376460   3.4809200           -0.6741255
## 42              roof_outdoors  -1.63114313   0.9552732           -0.9111180
## 43           avg_pass_rushers  -2.86615060   1.7761136           -1.6036105
## 44            prev_empty_rate  -3.57800147   2.7678869           -1.6558995
## 45                 total_line  -3.23746236   1.8183240           -1.8467255
## 46        prev_stop_rate_pass  -2.53198653   0.5327910           -1.9115507
## 47            home_attendance  -4.40017749   2.1601697           -2.7334207
## 48                       wind  -6.55707357   4.8577904           -3.3213057
## 49         prev_stop_rate_run  -5.41564014   2.2051859           -3.9102979
## 50                  prep_days  -8.22343300   0.4553396           -6.7168836
##    MeanDecreaseGini
## 1        1502.34486
## 2         834.11672
## 3         656.40207
## 4         513.83296
## 5         174.65129
## 6         389.56329
## 7         186.66917
## 8         146.78350
## 9         142.44792
## 10        131.00005
## 11        329.34371
## 12         95.04386
## 13         44.74742
## 14        102.43533
## 15         77.61081
## 16         40.36121
## 17         96.61331
## 18        102.73911
## 19        105.49579
## 20         87.89081
## 21         98.37429
## 22         22.29359
## 23         99.60738
## 24        103.19301
## 25         95.56300
## 26        101.21727
## 27         71.49038
## 28        121.66234
## 29         82.57644
## 30         96.90300
## 31        120.15237
## 32         84.41643
## 33         98.76654
## 34         97.50786
## 35        124.64125
## 36         65.50805
## 37         98.95181
## 38         91.06878
## 39        115.43382
## 40        119.46593
## 41        113.94428
## 42         13.73016
## 43        117.70823
## 44         94.78015
## 45        106.13448
## 46        110.04012
## 47        110.74195
## 48         69.12009
## 49        108.51177
## 50         54.23199</code></pre>
</div>
<div id="outcome-step" class="section level1" number="3">
<h1><span class="header-section-number">3</span> Outcome Step</h1>
<div class="sourceCode" id="cb31"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="co">#kill - my_id</span></span>
<span id="cb31-2"><a href="#cb31-2" tabindex="-1"></a>outcome_data <span class="ot">&lt;-</span> outcome_data[, my_id <span class="sc">:=</span> <span class="cn">NULL</span>]</span>
<span id="cb31-3"><a href="#cb31-3" tabindex="-1"></a>outcome_data[, year2017_team_ARI <span class="sc">:=</span> <span class="cn">NULL</span>]</span>
<span id="cb31-4"><a href="#cb31-4" tabindex="-1"></a>outcome_data[, offense_player_9_weeks_found_12w <span class="sc">:=</span> <span class="cn">NULL</span>]</span></code></pre></div>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a>outcome_data[, conversion <span class="sc">:=</span> <span class="fu">as.numeric</span>(<span class="fu">as.character</span>(conversion))]</span>
<span id="cb32-2"><a href="#cb32-2" tabindex="-1"></a><span class="co"># Then run OLS with GIMR correction</span></span>
<span id="cb32-3"><a href="#cb32-3" tabindex="-1"></a>ols_model <span class="ot">&lt;-</span> <span class="fu">lm</span>(conversion <span class="sc">~</span>  ., <span class="at">data =</span> outcome_data)</span></code></pre></div>
<div class="sourceCode" id="cb33"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co"># Load required libraries</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;lmtest&quot;</span>)</span></code></pre></div>
<pre><code>## Warning: package &#39;lmtest&#39; was built under R version 4.3.3</code></pre>
<pre><code>## Loading required package: zoo</code></pre>
<pre><code>## 
## Attaching package: &#39;zoo&#39;</code></pre>
<pre><code>## The following objects are masked from &#39;package:base&#39;:
## 
##     as.Date, as.Date.numeric</code></pre>
<div class="sourceCode" id="cb38"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="fu">library</span>(<span class="st">&quot;sandwich&quot;</span>)</span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co"># Run coeftest and print names, t-values, and p-values</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a>coef_test <span class="ot">&lt;-</span> <span class="fu">coeftest</span>(ols_model, <span class="at">vcov =</span> <span class="fu">vcovHC</span>(ols_model, <span class="at">type =</span> <span class="st">&quot;HC0&quot;</span>))</span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(coef_test)) {</span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a>  <span class="fu">cat</span>(<span class="fu">sprintf</span>(<span class="st">&quot;%-40s %8.3f %8.3f</span><span class="sc">\n</span><span class="st">&quot;</span>, </span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a>              <span class="fu">rownames</span>(coef_test)[i], </span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a>              coef_test[i, <span class="dv">3</span>],  <span class="co"># t-values (3rd column)</span></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a>              coef_test[i, <span class="dv">4</span>])) <span class="co"># p-values (4th column)</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a>}</span></code></pre></div>
<pre><code>## (Intercept)                                 2.408    0.016
## ydstogo                                   -13.574    0.000
## yardline_100                                4.923    0.000
## posteam_timeouts_remaining                  1.180    0.238
## defteam_timeouts_remaining                  1.197    0.232
## rush_attempt                                7.371    0.000
## week                                        0.820    0.412
## temp                                       -0.476    0.634
## wind                                        1.144    0.253
## vegas_wp                                    1.318    0.188
## vegas_wp_posteam                            0.640    0.522
## total_line                                  1.789    0.074
## prep_days                                   0.730    0.465
## overall_win_pct                             0.531    0.596
## team_win_pct                                0.631    0.528
## prev_shotgun_rate                          -0.030    0.976
## prev_singleback_rate                        0.072    0.943
## prev_empty_rate                             0.896    0.370
## prev_shotgun_success                       -1.574    0.116
## prev_singleback_success                     0.691    0.489
## prev_empty_success                         -0.055    0.957
## prev_stop_rate_run                          0.129    0.897
## prev_stop_rate_pass                        -3.100    0.002
## shotgun_rate                                1.797    0.072
## singleback_rate                             0.958    0.338
## empty_rate                                  0.147    0.883
## shotgun_success                            -2.227    0.026
## singleback_success                         -0.571    0.568
## empty_success                              -0.714    0.476
## def_stop_rate_run                           1.512    0.131
## def_stop_rate_pass                         -1.433    0.152
## avg_pass_rushers                           -0.639    0.523
## avg_box_defenders                          -0.458    0.647
## cover0_rate                                -0.125    0.900
## cover1_rate                                -0.287    0.774
## cover2_rate                                -0.413    0.680
## cover3_rate                                 1.345    0.179
## cover4_rate                                 0.973    0.331
## cover6_rate                                -0.438    0.661
## two_man_rate                                1.503    0.133
## prevent_rate                                2.631    0.009
## home_attendance                            -0.289    0.772
## roof_outdoors                              -0.310    0.756
## posteam_type_away                           0.886    0.375
## offense_formation_EMPTY                     0.453    0.651
## offense_formation_SHOTGUN                  -0.044    0.965
## offense_formation_SINGLEBACK               -0.476    0.634
## offense_player_1_passing_depth_short_grades_pass_12w    1.037    0.300
## offense_player_1_passing_pressure_no_blitz_completions_12w    1.077    0.282
## offense_player_9_years_found_3y            -1.634    0.102
## offense_player_9_run_blocking_zone_snap_counts_run_block_percent_12w   -0.526    0.599
## offense_player_9_receiving_depth_medium_yards_per_reception_12w   -2.036    0.042
## offense_player_9_receiving_depth_medium_longest_12w   -0.909    0.364
## offense_player_9_receiving_depth_medium_grades_hands_drop_12w    0.713    0.476
## offense_player_9_blocking_grades_snap_counts_block_12w   -2.057    0.040
## offense_player_14_blocking_grades_snap_counts_pass_play_2w   -0.239    0.811
## offense_player_9_receiving_depth_deep_route_rate_12w   -1.253    0.210
## offense_player_14_run_blocking_grades_run_block_2w    2.197    0.028
## offense_player_20_run_blocking_zone_grades_run_block_2w   -0.361    0.718
## offense_player_9_blocking_grades_block_percent_12w   -0.332    0.740
## offense_player_4_rushing_grades_run_plays_12w    0.463    0.643
## offense_player_9_run_blocking_grades_run_block_12w    2.174    0.030
## offense_player_9_receiving_grades_grades_hands_fumble_12w   -0.626    0.531
## offense_player_8_receiving_depth_deep_avg_depth_of_target_2w   -0.460    0.646
## offense_player_9_run_blocking_snap_counts_run_block_12w    1.963    0.050
## offense_player_14_receiving_depth_behind_los_grades_pass_route_12w    1.256    0.209
## offense_player_9_receiving_vs_scheme_zone_longest_12w   -0.503    0.615
## offense_player_9_run_blocking_zone_snap_counts_run_block_12w    1.121    0.263
## offense_player_9_receiving_vs_scheme_zone_grades_hands_drop_12w    1.387    0.165
## offense_player_9_blocking_grades_snap_counts_pass_play_12w    0.891    0.373
## offense_player_9_receiving_vs_scheme_man_grades_pass_route_12w    0.229    0.819
## offense_player_10_receiving_grades_yards_per_reception_12w    2.216    0.027
## year2017_team_BUF                          -1.041    0.298
## year2017_team_CHI                          -0.313    0.754
## year2017_team_CLE                           0.553    0.580
## year2017_team_DAL                          -1.260    0.208
## year2017_team_DET                          -0.937    0.349
## year2017_team_GB                            1.790    0.073
## year2017_team_HOU                           1.330    0.184
## year2017_team_MIA                          -1.733    0.083
## year2017_team_MIN                          -0.996    0.319
## year2017_team_NE                           -0.473    0.636
## year2017_team_SF                            1.800    0.072
## year2017_team_BAL                          -0.346    0.730
## year2017_team_DEN                          -0.301    0.763
## year2017_team_LA                            0.115    0.909
## year2017_team_NYG                          -1.006    0.314
## year2017_team_OAK                          -1.352    0.177
## year2017_team_SEA                           0.177    0.860
## year2017_team_CAR                           0.103    0.918
## year2017_team_CIN                           0.611    0.541
## year2017_team_IND                           0.616    0.538
## year2017_team_NO                            0.635    0.526
## year2017_team_PHI                           0.304    0.761
## year2017_team_PIT                          -1.448    0.148
## year2017_team_TEN                          -0.199    0.842
## year2017_team_WAS                           0.118    0.906
## year2017_team_KC                            1.132    0.258
## year2017_team_LAC                          -0.382    0.702
## year2017_team_NYJ                           0.776    0.438
## year2017_team_TB                            0.151    0.880
## year2017_team_ATL                          -0.342    0.732
## year2017_team_JAX                           0.119    0.905
## year2018_team_ARI                          -0.042    0.967
## year2018_team_BAL                          -0.116    0.908
## year2018_team_CAR                          -0.085    0.933
## year2018_team_CLE                          -0.475    0.635
## year2018_team_DET                           0.137    0.891
## year2018_team_HOU                           0.635    0.526
## year2018_team_IND                          -0.930    0.352
## year2018_team_KC                            0.353    0.724
## year2018_team_NYG                           0.234    0.815
## year2018_team_OAK                          -0.614    0.539
## year2018_team_PHI                           0.107    0.915
## year2018_team_SEA                          -0.614    0.540
## year2018_team_BUF                          -0.587    0.557
## year2018_team_CHI                          -0.415    0.678
## year2018_team_CIN                          -0.772    0.440
## year2018_team_DAL                          -0.774    0.439
## year2018_team_DEN                          -0.508    0.611
## year2018_team_GB                           -0.343    0.731
## year2018_team_LAC                           0.195    0.845
## year2018_team_NE                           -0.530    0.596
## year2018_team_NO                            0.073    0.942
## year2018_team_PIT                           0.096    0.924
## year2018_team_SF                           -0.148    0.883
## year2018_team_MIA                           0.076    0.939
## year2018_team_MIN                          -0.250    0.802
## year2018_team_NYJ                           0.318    0.751
## year2018_team_TB                           -0.051    0.960
## year2018_team_ATL                          -0.160    0.873
## year2018_team_JAX                          -0.493    0.622
## year2018_team_LA                           -1.210    0.226
## year2018_team_TEN                           0.315    0.752
## year2018_team_WAS                          -0.516    0.606
## year2019_team_ARI                          -0.766    0.444
## year2019_team_BUF                          -0.940    0.347
## year2019_team_CHI                          -0.037    0.970
## year2019_team_CLE                           0.235    0.814
## year2019_team_DAL                          -0.648    0.517
## year2019_team_IND                          -0.693    0.488
## year2019_team_JAX                          -0.036    0.971
## year2019_team_KC                           -0.220    0.826
## year2019_team_LAC                          -1.001    0.317
## year2019_team_MIN                          -0.702    0.483
## year2019_team_NE                           -0.134    0.893
## year2019_team_NO                           -1.009    0.313
## year2019_team_PHI                          -0.184    0.854
## year2019_team_SEA                          -0.213    0.832
## year2019_team_SF                           -0.574    0.566
## year2019_team_TB                           -0.692    0.489
## year2019_team_BAL                          -0.067    0.946
## year2019_team_CAR                          -0.210    0.834
## year2019_team_DEN                           0.219    0.826
## year2019_team_DET                          -0.786    0.432
## year2019_team_HOU                          -0.611    0.541
## year2019_team_LA                           -0.872    0.383
## year2019_team_MIA                          -1.721    0.085
## year2019_team_NYG                          -1.019    0.308
## year2019_team_NYJ                          -1.420    0.156
## year2019_team_OAK                          -0.572    0.567
## year2019_team_PIT                          -1.867    0.062
## year2019_team_TEN                          -0.947    0.344
## year2019_team_CIN                           0.242    0.809
## year2019_team_WAS                          -0.541    0.588
## year2019_team_ATL                          -0.143    0.886
## year2019_team_GB                           -0.558    0.577
## year2020_team_ATL                          -0.014    0.989
## year2020_team_BAL                           0.016    0.987
## year2020_team_BUF                          -0.299    0.765
## year2020_team_CAR                           0.547    0.584
## year2020_team_CIN                           0.386    0.699
## year2020_team_DEN                          -0.712    0.477
## year2020_team_DET                          -0.796    0.426
## year2020_team_JAX                          -0.878    0.380
## year2020_team_KC                           -0.014    0.989
## year2020_team_LA                           -1.006    0.315
## year2020_team_MIN                           0.383    0.702
## year2020_team_NE                           -0.396    0.692
## year2020_team_NO                           -0.106    0.915
## year2020_team_NYG                          -0.088    0.930
## year2020_team_SF                            0.093    0.926
## year2020_team_WAS                          -0.110    0.912
## year2020_team_CHI                          -0.416    0.677
## year2020_team_DAL                          -0.391    0.696
## year2020_team_GB                           -0.373    0.709
## year2020_team_HOU                          -0.775    0.439
## year2020_team_MIA                          -1.126    0.260
## year2020_team_NYJ                          -0.121    0.903
## year2020_team_TB                            0.391    0.696
## year2020_team_TEN                          -0.630    0.529
## year2020_team_ARI                           0.393    0.695
## year2020_team_CLE                          -1.175    0.240
## year2020_team_IND                          -0.917    0.359
## year2020_team_LAC                          -0.096    0.924
## year2020_team_PHI                           0.250    0.803
## year2020_team_SEA                          -0.570    0.569
## year2020_team_LV                            0.195    0.845
## year2020_team_PIT                          -0.893    0.372
## year2021_team_ATL                          -1.060    0.289
## year2021_team_BUF                          -0.049    0.961
## year2021_team_CIN                          -1.157    0.247
## year2021_team_DAL                          -0.443    0.658
## year2021_team_DEN                           0.055    0.956
## year2021_team_DET                          -0.515    0.606
## year2021_team_KC                           -0.094    0.925
## year2021_team_LA                           -0.297    0.766
## year2021_team_LV                            0.152    0.879
## year2021_team_MIN                          -0.247    0.805
## year2021_team_NE                            0.088    0.930
## year2021_team_NO                           -0.034    0.973
## year2021_team_NYG                          -0.226    0.821
## year2021_team_SF                           -0.092    0.926
## year2021_team_TEN                          -0.423    0.673
## year2021_team_ARI                           0.278    0.781
## year2021_team_BAL                           0.421    0.674
## year2021_team_CAR                          -0.563    0.574
## year2021_team_CHI                          -1.351    0.177
## year2021_team_GB                            0.314    0.754
## year2021_team_IND                          -0.578    0.563
## year2021_team_LAC                          -0.075    0.940
## year2021_team_MIA                          -0.098    0.922
## year2021_team_NYJ                          -0.299    0.765
## year2021_team_PHI                          -1.026    0.305
## year2021_team_SEA                          -0.891    0.373
## year2021_team_TB                           -0.048    0.962
## year2021_team_WAS                          -0.731    0.465
## year2021_team_CLE                          -0.676    0.499
## year2021_team_HOU                          -0.290    0.772
## year2021_team_JAX                          -0.055    0.956
## year2021_team_PIT                          -0.455    0.649
## year2022_team_ARI                          -1.012    0.311
## year2022_team_ATL                          -1.508    0.132
## year2022_team_CAR                           0.424    0.672
## year2022_team_CHI                          -0.579    0.563
## year2022_team_CIN                          -0.703    0.482
## year2022_team_HOU                          -0.411    0.681
## year2022_team_IND                          -0.868    0.385
## year2022_team_LAC                          -0.592    0.554
## year2022_team_MIA                          -1.003    0.316
## year2022_team_SEA                          -0.255    0.798
## year2022_team_TB                           -0.021    0.983
## year2022_team_TEN                           0.615    0.538
## year2022_team_WAS                          -0.437    0.662
## year2022_team_BAL                          -1.122    0.262
## year2022_team_BUF                           0.323    0.747
## year2022_team_DAL                           0.049    0.961
## year2022_team_DET                          -0.480    0.631
## year2022_team_GB                           -0.698    0.485
## year2022_team_JAX                          -0.807    0.420
## year2022_team_KC                           -0.646    0.518
## year2022_team_LA                            0.603    0.546
## year2022_team_LV                            0.516    0.606
## year2022_team_NO                           -0.458    0.647
## year2022_team_PHI                           0.374    0.708
## year2022_team_PIT                           0.650    0.515
## year2022_team_CLE                          -0.323    0.747
## year2022_team_DEN                           0.116    0.907
## year2022_team_MIN                          -0.908    0.364
## year2022_team_NE                            0.142    0.887
## year2022_team_NYJ                          -0.758    0.449
## year2022_team_NYG                          -0.644    0.520
## year2022_team_SF                           -0.924    0.355
## year2023_team_BAL                          -0.383    0.701
## year2023_team_CHI                          -0.802    0.422
## year2023_team_CLE                          -0.807    0.419
## year2023_team_GB                           -0.046    0.963
## year2023_team_IND                           0.256    0.798
## year2023_team_KC                           -0.089    0.929
## year2023_team_LAC                           0.038    0.969
## year2023_team_LV                           -0.223    0.824
## year2023_team_MIA                           0.161    0.872
## year2023_team_MIN                           0.836    0.403
## year2023_team_NO                           -0.346    0.729
## year2023_team_NYG                           0.172    0.863
## year2023_team_SEA                          -1.636    0.102
## year2023_team_SF                            0.083    0.934
## year2023_team_WAS                           0.493    0.622
## year2023_team_ATL                          -0.782    0.434
## year2023_team_BUF                          -0.743    0.458
## year2023_team_CAR                          -0.196    0.845
## year2023_team_DAL                           0.095    0.924
## year2023_team_DEN                          -0.315    0.753
## year2023_team_HOU                          -0.279    0.780
## year2023_team_LA                            0.149    0.881
## year2023_team_NE                           -0.020    0.984
## year2023_team_PHI                          -0.122    0.903
## year2023_team_PIT                          -0.158    0.875
## year2023_team_TEN                          -0.188    0.851
## year2023_team_ARI                          -0.965    0.335
## year2023_team_CIN                          -1.005    0.315
## year2023_team_DET                           0.029    0.977
## year2023_team_TB                            0.347    0.729
## year2023_team_JAX                          -0.599    0.549
## year2023_team_NYJ                           0.791    0.429
## is_first_half                              -0.799    0.424
## time_in_half                                1.455    0.146
## GIMR                                        2.642    0.008</code></pre>
<div class="sourceCode" id="cb40"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="co"># get vifs</span></span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a><span class="fu">library</span>(car)</span></code></pre></div>
<pre><code>## Warning: package &#39;car&#39; was built under R version 4.3.3</code></pre>
<pre><code>## Loading required package: carData</code></pre>
<pre><code>## Warning: package &#39;carData&#39; was built under R version 4.3.3</code></pre>
<pre><code>## 
## Attaching package: &#39;car&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:dplyr&#39;:
## 
##     recode</code></pre>
<div class="sourceCode" id="cb46"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="fu">vif</span>(ols_model)</span></code></pre></div>
<pre><code>##                                                              ydstogo 
##                                                             1.695556 
##                                                         yardline_100 
##                                                             1.362198 
##                                           posteam_timeouts_remaining 
##                                                             1.633017 
##                                           defteam_timeouts_remaining 
##                                                             1.545981 
##                                                         rush_attempt 
##                                                             1.983539 
##                                                                 week 
##                                                             1.888514 
##                                                                 temp 
##                                                             2.179821 
##                                                                 wind 
##                                                             2.218819 
##                                                             vegas_wp 
##                                                             2.345439 
##                                                     vegas_wp_posteam 
##                                                             1.996787 
##                                                           total_line 
##                                                             2.975945 
##                                                            prep_days 
##                                                             1.204775 
##                                                      overall_win_pct 
##                                                             3.409717 
##                                                         team_win_pct 
##                                                             3.914711 
##                                                    prev_shotgun_rate 
##                                                             3.568171 
##                                                 prev_singleback_rate 
##                                                             3.510037 
##                                                      prev_empty_rate 
##                                                             1.987832 
##                                                 prev_shotgun_success 
##                                                             2.143088 
##                                              prev_singleback_success 
##                                                             2.320763 
##                                                   prev_empty_success 
##                                                             2.180370 
##                                                   prev_stop_rate_run 
##                                                             2.437127 
##                                                  prev_stop_rate_pass 
##                                                             1.927213 
##                                                         shotgun_rate 
##                                                             2.618576 
##                                                      singleback_rate 
##                                                             2.299972 
##                                                           empty_rate 
##                                                             2.291745 
##                                                      shotgun_success 
##                                                             1.559043 
##                                                   singleback_success 
##                                                             1.706412 
##                                                        empty_success 
##                                                             1.785840 
##                                                    def_stop_rate_run 
##                                                             1.670950 
##                                                   def_stop_rate_pass 
##                                                             1.678367 
##                                                     avg_pass_rushers 
##                                                             2.388189 
##                                                    avg_box_defenders 
##                                                             2.192154 
##                                                          cover0_rate 
##                                                             2.508952 
##                                                          cover1_rate 
##                                                             5.986277 
##                                                          cover2_rate 
##                                                             3.283755 
##                                                          cover3_rate 
##                                                             6.212351 
##                                                          cover4_rate 
##                                                             3.434396 
##                                                          cover6_rate 
##                                                             2.846937 
##                                                         two_man_rate 
##                                                             1.748479 
##                                                         prevent_rate 
##                                                             1.487619 
##                                                      home_attendance 
##                                                             9.436196 
##                                                        roof_outdoors 
##                                                             2.372450 
##                                                    posteam_type_away 
##                                                             1.456137 
##                                              offense_formation_EMPTY 
##                                                             2.720058 
##                                            offense_formation_SHOTGUN 
##                                                             4.380150 
##                                         offense_formation_SINGLEBACK 
##                                                             2.196844 
##                 offense_player_1_passing_depth_short_grades_pass_12w 
##                                                             2.144197 
##           offense_player_1_passing_pressure_no_blitz_completions_12w 
##                                                             2.534405 
##                                      offense_player_9_years_found_3y 
##                                                            38.655486 
## offense_player_9_run_blocking_zone_snap_counts_run_block_percent_12w 
##                                                            15.706702 
##      offense_player_9_receiving_depth_medium_yards_per_reception_12w 
##                                                             6.363725 
##                  offense_player_9_receiving_depth_medium_longest_12w 
##                                                             4.503965 
##        offense_player_9_receiving_depth_medium_grades_hands_drop_12w 
##                                                             8.645422 
##               offense_player_9_blocking_grades_snap_counts_block_12w 
##                                                          3765.109804 
##           offense_player_14_blocking_grades_snap_counts_pass_play_2w 
##                                                             1.720490 
##                 offense_player_9_receiving_depth_deep_route_rate_12w 
##                                                             4.451175 
##                   offense_player_14_run_blocking_grades_run_block_2w 
##                                                             1.464644 
##              offense_player_20_run_blocking_zone_grades_run_block_2w 
##                                                             1.204084 
##                   offense_player_9_blocking_grades_block_percent_12w 
##                                                            13.238383 
##                        offense_player_4_rushing_grades_run_plays_12w 
##                                                             1.343208 
##                   offense_player_9_run_blocking_grades_run_block_12w 
##                                                            32.507944 
##            offense_player_9_receiving_grades_grades_hands_fumble_12w 
##                                                            25.657314 
##         offense_player_8_receiving_depth_deep_avg_depth_of_target_2w 
##                                                             1.251970 
##              offense_player_9_run_blocking_snap_counts_run_block_12w 
##                                                          3768.664990 
##   offense_player_14_receiving_depth_behind_los_grades_pass_route_12w 
##                                                             1.550598 
##                offense_player_9_receiving_vs_scheme_zone_longest_12w 
##                                                             3.779132 
##         offense_player_9_run_blocking_zone_snap_counts_run_block_12w 
##                                                            27.071338 
##      offense_player_9_receiving_vs_scheme_zone_grades_hands_drop_12w 
##                                                            13.460222 
##           offense_player_9_blocking_grades_snap_counts_pass_play_12w 
##                                                            18.805764 
##       offense_player_9_receiving_vs_scheme_man_grades_pass_route_12w 
##                                                            23.377653 
##           offense_player_10_receiving_grades_yards_per_reception_12w 
##                                                             1.648055 
##                                                    year2017_team_BUF 
##                                                             2.241680 
##                                                    year2017_team_CHI 
##                                                             2.753017 
##                                                    year2017_team_CLE 
##                                                             2.389192 
##                                                    year2017_team_DAL 
##                                                             2.413284 
##                                                    year2017_team_DET 
##                                                             1.961730 
##                                                     year2017_team_GB 
##                                                             2.905965 
##                                                    year2017_team_HOU 
##                                                             1.622165 
##                                                    year2017_team_MIA 
##                                                             2.681369 
##                                                    year2017_team_MIN 
##                                                             2.292310 
##                                                     year2017_team_NE 
##                                                             2.508084 
##                                                     year2017_team_SF 
##                                                             1.879289 
##                                                    year2017_team_BAL 
##                                                             2.184194 
##                                                    year2017_team_DEN 
##                                                             2.437931 
##                                                     year2017_team_LA 
##                                                             2.369155 
##                                                    year2017_team_NYG 
##                                                             2.894401 
##                                                    year2017_team_OAK 
##                                                             2.402441 
##                                                    year2017_team_SEA 
##                                                             1.903969 
##                                                    year2017_team_CAR 
##                                                             1.774876 
##                                                    year2017_team_CIN 
##                                                             2.197900 
##                                                    year2017_team_IND 
##                                                             2.524065 
##                                                     year2017_team_NO 
##                                                             1.858155 
##                                                    year2017_team_PHI 
##                                                             2.297433 
##                                                    year2017_team_PIT 
##                                                             1.740584 
##                                                    year2017_team_TEN 
##                                                             1.717621 
##                                                    year2017_team_WAS 
##                                                             1.767069 
##                                                     year2017_team_KC 
##                                                             1.953209 
##                                                    year2017_team_LAC 
##                                                             2.018803 
##                                                    year2017_team_NYJ 
##                                                             1.836888 
##                                                     year2017_team_TB 
##                                                             1.682508 
##                                                    year2017_team_ATL 
##                                                             2.130524 
##                                                    year2017_team_JAX 
##                                                             1.878104 
##                                                    year2018_team_ARI 
##                                                             3.561368 
##                                                    year2018_team_BAL 
##                                                             4.252328 
##                                                    year2018_team_CAR 
##                                                             3.596187 
##                                                    year2018_team_CLE 
##                                                             4.242518 
##                                                    year2018_team_DET 
##                                                             3.317028 
##                                                    year2018_team_HOU 
##                                                             2.870024 
##                                                    year2018_team_IND 
##                                                             3.344514 
##                                                     year2018_team_KC 
##                                                             3.565778 
##                                                    year2018_team_NYG 
##                                                             2.621758 
##                                                    year2018_team_OAK 
##                                                             2.785851 
##                                                    year2018_team_PHI 
##                                                             4.400329 
##                                                    year2018_team_SEA 
##                                                             2.439642 
##                                                    year2018_team_BUF 
##                                                             2.699101 
##                                                    year2018_team_CHI 
##                                                             4.197897 
##                                                    year2018_team_CIN 
##                                                             2.927636 
##                                                    year2018_team_DAL 
##                                                             3.683869 
##                                                    year2018_team_DEN 
##                                                             3.203978 
##                                                     year2018_team_GB 
##                                                             2.821385 
##                                                    year2018_team_LAC 
##                                                             3.238922 
##                                                     year2018_team_NE 
##                                                             2.584767 
##                                                     year2018_team_NO 
##                                                             3.611710 
##                                                    year2018_team_PIT 
##                                                             2.233378 
##                                                     year2018_team_SF 
##                                                             2.560472 
##                                                    year2018_team_MIA 
##                                                             2.936045 
##                                                    year2018_team_MIN 
##                                                             3.163999 
##                                                    year2018_team_NYJ 
##                                                             1.780568 
##                                                     year2018_team_TB 
##                                                             3.058215 
##                                                    year2018_team_ATL 
##                                                             3.940487 
##                                                    year2018_team_JAX 
##                                                             3.282992 
##                                                     year2018_team_LA 
##                                                             2.509093 
##                                                    year2018_team_TEN 
##                                                             2.317960 
##                                                    year2018_team_WAS 
##                                                             2.556223 
##                                                    year2019_team_ARI 
##                                                             3.455730 
##                                                    year2019_team_BUF 
##                                                             4.383961 
##                                                    year2019_team_CHI 
##                                                             3.845709 
##                                                    year2019_team_CLE 
##                                                             3.144719 
##                                                    year2019_team_DAL 
##                                                             3.157847 
##                                                    year2019_team_IND 
##                                                             3.942199 
##                                                    year2019_team_JAX 
##                                                             3.384807 
##                                                     year2019_team_KC 
##                                                             3.168532 
##                                                    year2019_team_LAC 
##                                                             3.286524 
##                                                    year2019_team_MIN 
##                                                             3.778973 
##                                                     year2019_team_NE 
##                                                             3.494856 
##                                                     year2019_team_NO 
##                                                             3.628875 
##                                                    year2019_team_PHI 
##                                                             4.203591 
##                                                    year2019_team_SEA 
##                                                             2.502865 
##                                                     year2019_team_SF 
##                                                             4.153422 
##                                                     year2019_team_TB 
##                                                             3.960698 
##                                                    year2019_team_BAL 
##                                                             3.740116 
##                                                    year2019_team_CAR 
##                                                             3.022020 
##                                                    year2019_team_DEN 
##                                                             3.207971 
##                                                    year2019_team_DET 
##                                                             2.910616 
##                                                    year2019_team_HOU 
##                                                             3.815403 
##                                                     year2019_team_LA 
##                                                             2.691261 
##                                                    year2019_team_MIA 
##                                                             3.174103 
##                                                    year2019_team_NYG 
##                                                             3.276816 
##                                                    year2019_team_NYJ 
##                                                             3.081717 
##                                                    year2019_team_OAK 
##                                                             3.569304 
##                                                    year2019_team_PIT 
##                                                             2.225719 
##                                                    year2019_team_TEN 
##                                                             3.371645 
##                                                    year2019_team_CIN 
##                                                             3.439052 
##                                                    year2019_team_WAS 
##                                                             3.226197 
##                                                    year2019_team_ATL 
##                                                             3.484963 
##                                                     year2019_team_GB 
##                                                             3.157287 
##                                                    year2020_team_ATL 
##                                                             5.052317 
##                                                    year2020_team_BAL 
##                                                             5.348153 
##                                                    year2020_team_BUF 
##                                                             3.359620 
##                                                    year2020_team_CAR 
##                                                             3.255080 
##                                                    year2020_team_CIN 
##                                                             4.281962 
##                                                    year2020_team_DEN 
##                                                             3.393653 
##                                                    year2020_team_DET 
##                                                             3.875604 
##                                                    year2020_team_JAX 
##                                                             4.275557 
##                                                     year2020_team_KC 
##                                                             3.322939 
##                                                     year2020_team_LA 
##                                                             3.782022 
##                                                    year2020_team_MIN 
##                                                             5.619356 
##                                                     year2020_team_NE 
##                                                             4.055150 
##                                                     year2020_team_NO 
##                                                             5.818960 
##                                                    year2020_team_NYG 
##                                                             3.855223 
##                                                     year2020_team_SF 
##                                                             3.468314 
##                                                    year2020_team_WAS 
##                                                             3.972215 
##                                                    year2020_team_CHI 
##                                                             4.101401 
##                                                    year2020_team_DAL 
##                                                             5.086237 
##                                                     year2020_team_GB 
##                                                             3.443177 
##                                                    year2020_team_HOU 
##                                                             3.645414 
##                                                    year2020_team_MIA 
##                                                             3.972882 
##                                                    year2020_team_NYJ 
##                                                             3.191146 
##                                                     year2020_team_TB 
##                                                             3.808095 
##                                                    year2020_team_TEN 
##                                                             3.515179 
##                                                    year2020_team_ARI 
##                                                             3.407669 
##                                                    year2020_team_CLE 
##                                                             4.096475 
##                                                    year2020_team_IND 
##                                                             3.463697 
##                                                    year2020_team_LAC 
##                                                             3.706571 
##                                                    year2020_team_PHI 
##                                                             4.477779 
##                                                    year2020_team_SEA 
##                                                             3.774617 
##                                                     year2020_team_LV 
##                                                             3.816718 
##                                                    year2020_team_PIT 
##                                                             2.950329 
##                                                    year2021_team_ATL 
##                                                             4.622355 
##                                                    year2021_team_BUF 
##                                                             5.245308 
##                                                    year2021_team_CIN 
##                                                             3.703386 
##                                                    year2021_team_DAL 
##                                                             3.887192 
##                                                    year2021_team_DEN 
##                                                             4.713101 
##                                                    year2021_team_DET 
##                                                             4.211035 
##                                                     year2021_team_KC 
##                                                             4.170692 
##                                                     year2021_team_LA 
##                                                             4.734806 
##                                                     year2021_team_LV 
##                                                             3.101154 
##                                                    year2021_team_MIN 
##                                                             4.709966 
##                                                     year2021_team_NE 
##                                                             4.004998 
##                                                     year2021_team_NO 
##                                                             4.064828 
##                                                    year2021_team_NYG 
##                                                             4.324534 
##                                                     year2021_team_SF 
##                                                             3.596743 
##                                                    year2021_team_TEN 
##                                                             4.437046 
##                                                    year2021_team_ARI 
##                                                             4.850587 
##                                                    year2021_team_BAL 
##                                                             2.922741 
##                                                    year2021_team_CAR 
##                                                             5.587354 
##                                                    year2021_team_CHI 
##                                                             4.347812 
##                                                     year2021_team_GB 
##                                                             4.713939 
##                                                    year2021_team_IND 
##                                                             4.290216 
##                                                    year2021_team_LAC 
##                                                             3.964398 
##                                                    year2021_team_MIA 
##                                                             3.941761 
##                                                    year2021_team_NYJ 
##                                                             3.537356 
##                                                    year2021_team_PHI 
##                                                             4.984251 
##                                                    year2021_team_SEA 
##                                                             2.983301 
##                                                     year2021_team_TB 
##                                                             3.872724 
##                                                    year2021_team_WAS 
##                                                             5.424286 
##                                                    year2021_team_CLE 
##                                                             4.443711 
##                                                    year2021_team_HOU 
##                                                             4.117919 
##                                                    year2021_team_JAX 
##                                                             3.540865 
##                                                    year2021_team_PIT 
##                                                             3.929770 
##                                                    year2022_team_ARI 
##                                                             4.957528 
##                                                    year2022_team_ATL 
##                                                             3.670370 
##                                                    year2022_team_CAR 
##                                                             2.958080 
##                                                    year2022_team_CHI 
##                                                             2.624192 
##                                                    year2022_team_CIN 
##                                                             3.123226 
##                                                    year2022_team_HOU 
##                                                             4.177734 
##                                                    year2022_team_IND 
##                                                             4.046427 
##                                                    year2022_team_LAC 
##                                                             4.370157 
##                                                    year2022_team_MIA 
##                                                             4.905417 
##                                                    year2022_team_SEA 
##                                                             4.066739 
##                                                     year2022_team_TB 
##                                                             5.028673 
##                                                    year2022_team_TEN 
##                                                             4.800284 
##                                                    year2022_team_WAS 
##                                                             4.368988 
##                                                    year2022_team_BAL 
##                                                             3.790681 
##                                                    year2022_team_BUF 
##                                                             4.071412 
##                                                    year2022_team_DAL 
##                                                             2.602890 
##                                                    year2022_team_DET 
##                                                             5.257115 
##                                                     year2022_team_GB 
##                                                             3.830726 
##                                                    year2022_team_JAX 
##                                                             5.578399 
##                                                     year2022_team_KC 
##                                                             2.765190 
##                                                     year2022_team_LA 
##                                                             3.384884 
##                                                     year2022_team_LV 
##                                                             3.515357 
##                                                     year2022_team_NO 
##                                                             2.911249 
##                                                    year2022_team_PHI 
##                                                             4.242891 
##                                                    year2022_team_PIT 
##                                                             3.529585 
##                                                    year2022_team_CLE 
##                                                             5.249383 
##                                                    year2022_team_DEN 
##                                                             4.283259 
##                                                    year2022_team_MIN 
##                                                             3.455348 
##                                                     year2022_team_NE 
##                                                             3.488314 
##                                                    year2022_team_NYJ 
##                                                             4.104363 
##                                                    year2022_team_NYG 
##                                                             3.560355 
##                                                     year2022_team_SF 
##                                                             2.280194 
##                                                    year2023_team_BAL 
##                                                             4.127701 
##                                                    year2023_team_CHI 
##                                                             3.892583 
##                                                    year2023_team_CLE 
##                                                             3.184177 
##                                                     year2023_team_GB 
##                                                             4.075616 
##                                                    year2023_team_IND 
##                                                             3.928044 
##                                                     year2023_team_KC 
##                                                             3.532274 
##                                                    year2023_team_LAC 
##                                                             3.892652 
##                                                     year2023_team_LV 
##                                                             4.280628 
##                                                    year2023_team_MIA 
##                                                             3.621593 
##                                                    year2023_team_MIN 
##                                                             4.361649 
##                                                     year2023_team_NO 
##                                                             3.405491 
##                                                    year2023_team_NYG 
##                                                             5.147091 
##                                                    year2023_team_SEA 
##                                                             4.098170 
##                                                     year2023_team_SF 
##                                                             3.469602 
##                                                    year2023_team_WAS 
##                                                             4.404912 
##                                                    year2023_team_ATL 
##                                                             3.178457 
##                                                    year2023_team_BUF 
##                                                             2.760783 
##                                                    year2023_team_CAR 
##                                                             4.417086 
##                                                    year2023_team_DAL 
##                                                             3.536873 
##                                                    year2023_team_DEN 
##                                                             4.048558 
##                                                    year2023_team_HOU 
##                                                             2.575558 
##                                                     year2023_team_LA 
##                                                             2.978617 
##                                                     year2023_team_NE 
##                                                             3.260538 
##                                                    year2023_team_PHI 
##                                                             4.053065 
##                                                    year2023_team_PIT 
##                                                             2.615088 
##                                                    year2023_team_TEN 
##                                                             3.036012 
##                                                    year2023_team_ARI 
##                                                             3.533533 
##                                                    year2023_team_CIN 
##                                                             2.938736 
##                                                    year2023_team_DET 
##                                                             5.453823 
##                                                     year2023_team_TB 
##                                                             4.292771 
##                                                    year2023_team_JAX 
##                                                             3.237195 
##                                                    year2023_team_NYJ 
##                                                             2.774831 
##                                                        is_first_half 
##                                                             1.319145 
##                                                         time_in_half 
##                                                             1.920349 
##                                                                 GIMR 
##                                                             1.561495</code></pre>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>

<script>
$(document).ready(function ()  {

    // temporarily add toc-ignore selector to headers for the consistency with Pandoc
    $('.unlisted.unnumbered').addClass('toc-ignore')

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2,h3",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_');
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
